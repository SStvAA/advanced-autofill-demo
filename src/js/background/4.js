const _0x1ccac8=(function(){let _0x32323e=!![];return function(_0x35e112,_0x4092db){const _0x3a4aeb=_0x32323e?function(){if(_0x4092db){const _0x1dfe4a=_0x4092db['apply'](_0x35e112,arguments);return _0x4092db=null,_0x1dfe4a;}}:function(){};return _0x32323e=![],_0x3a4aeb;};}()),_0x3a2d1c=_0x1ccac8(this,function(){return _0x3a2d1c['toString']()['search']('(((.+)+)+)+$')['toString']()['constructor'](_0x3a2d1c)['search']('(((.+)+)+)+$');});_0x3a2d1c();const _0x31268b=(function(){let _0x13e89f=!![];return function(_0x2f4330,_0x45d2b8){const _0xd6d7a6=_0x13e89f?function(){if(_0x45d2b8){const _0x4bd4b6=_0x45d2b8['apply'](_0x2f4330,arguments);return _0x45d2b8=null,_0x4bd4b6;}}:function(){};return _0x13e89f=![],_0xd6d7a6;};}()),_0xf18292=_0x31268b(this,function(){let _0x1f82d3;try{const _0x172f00=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');_0x1f82d3=_0x172f00();}catch(_0x23ec8a){_0x1f82d3=window;}const _0x498edd=_0x1f82d3['console']=_0x1f82d3['console']||{},_0x3ca8f5=['log','warn','info','error','exception','table','trace'];for(let _0x33af4e=0x0;_0x33af4e<_0x3ca8f5['length'];_0x33af4e++){const _0x530458=_0x31268b['constructor']['prototype']['bind'](_0x31268b),_0x156e3f=_0x3ca8f5[_0x33af4e],_0x564796=_0x498edd[_0x156e3f]||_0x530458;_0x530458['__proto__']=_0x31268b['bind'](_0x31268b),_0x530458['toString']=_0x564796['toString']['bind'](_0x564796),_0x498edd[_0x156e3f]=_0x530458;}});_0xf18292();const SocketController=class{constructor(){this['SOCKET']=null,this['SERVER_URL']='https://slow-socket.advancedautofill.com:8084',this['SERVER_PATH']='/',this['SIGNATURE']=Tools['generateToken'](),this['TIME_BETWEEN_RECONNECTION_SECONDS']=0x5,this['LAST_ERROR']=null,this['RECONNECTING']=!0x1,this['initialize']();}async['initialize'](){await this['configureSocket'](),this['setSocketEvents'](),this['setEventBusEvents']();}async['getUserData'](){console['log']('SocketController\x20(getUserData):\x20getting\x20user\x20data...');let _0x55ecdb,_0x459be0=null;for(_0x55ecdb=await SessionController['getUserData']();null===_0x55ecdb;)_0x55ecdb=await SessionController['getUserData'](),await Tools['waitTime'](0x1);for(;null===_0x459be0;){try{_0x459be0=await GI['ContributorIdController']['get']();}catch(_0x3a3cc9){console['error']('SocketController\x20(getUserData):\x20cannot\x20get\x20contributor\x20id',_0x3a3cc9);}await Tools['waitTime'](0x1);}return{'sessionToken':_0x55ecdb['sessionToken'],'contributorId':_0x459be0};}async['configureSocket'](){console['log']('SocketController\x20(configureSocket):\x20configuring\x20socket...'),this['setBadge']('connecting');const _0x526a39=await this['getUserData'](),{SERVER_URL:_0x32304b,SERVER_PATH:_0x5c6342,SIGNATURE:_0xce6e07}=this,{sessionToken:_0xf09cdf,contributorId:_0x1fc20d}=_0x526a39;this['SOCKET']=io(_0x32304b,{'timeout':0x2710,'reconnection':!0x1,'path':_0x5c6342,'auth':{'role':'user','token':_0xf09cdf,'contributorId':_0x1fc20d,'signature':_0xce6e07}});}async['documentExportController'](_0x4cf01f,_0x947f11,_0x590395){try{this['setBadge']('document-download-background'),await GI['SyncDocumentController']['importFromSocket'](_0x4cf01f,_0x947f11,_0x590395);}catch(_0xf6b9a8){console['error']('SocketController\x20(documentExportController):',_0xf6b9a8);}}['autoOpenTaskController'](_0x53e7b8){new AutoOpenTaskController(_0x53e7b8);}async['reconnectSocket'](){this['setBadge']('connecting');if(this['RECONNECTING'])console['log']('SocketController\x20(reconnect):\x20there\x20is\x20no\x20reconnection\x20because\x20there\x20is\x20already\x20a\x20reconnection\x20attempt');else{console['log']('SocketController\x20(reconnect):\x20RECONNECTING...'),this['RECONNECTING']=!0x0;var {sessionToken:_0x29a834,contributorId:_0x2d6994}=await this['getUserData']();this['SOCKET']['auth']['token']=_0x29a834,this['SOCKET']['auth']['contributorId']=_0x2d6994,this['SOCKET']['open'](_0x2075f9=>{_0x2075f9&&(console['error']('SocketController\x20(reconnect):\x20error\x20reconnecting',_0x2075f9),this['RECONNECTING']=!0x1);});}}['setEventBusEvents'](){console['log']('SocketController\x20(setEventBusEvents):\x20setting\x20event\x20bus\x20events'),GI['EventBus']['on']('emitRequest',async _0x584e76=>{try{console['log']('SocketController\x20(listenForEmitRequest):',_0x584e76),this['SOCKET']['emit'](_0x584e76['request'],_0x584e76['data']);}catch{}});}['setSocketEvents'](){console['log']('SocketController\x20(setSocketEvents):\x20setting\x20socket\x20events'),this['SOCKET']['on']('disconnect',()=>this['handleDisconnectSocketEvent']()),this['SOCKET']['on']('close',()=>this['handleCloseSocketEvent']()),this['SOCKET']['on']('connect_error',_0x155af7=>this['handleConnectErrorSocketEvent'](_0x155af7)),this['SOCKET']['on']('connect',()=>this['handleConnectSocketEvent']()),this['SOCKET']['on']('documentExport',_0x490a8d=>this['handleDocumentExportSocketEvent'](_0x490a8d)),this['SOCKET']['on']('autoOpenTask',_0x2a7502=>this['handleAutoOpenTaskSocketEvent'](_0x2a7502));}['handleDisconnectSocketEvent'](){console['error']('SocketController\x20(disconnect):\x20disconnected'),this['handleSocketConnectionError']();}['handleCloseSocketEvent'](){console['error']('SocketController\x20(close):\x20closed'),this['handleSocketConnectionError']();}['handleConnectErrorSocketEvent'](_0x36c560){console['error']('SocketController\x20(connect_error):',_0x36c560),this['handleSocketConnectionError'](),_0x36c560['message']['includes']('invalid\x20session\x20with\x20token')&&GI['EventBus']['emit']('invalidSessionError',_0x36c560);}['handleConnectSocketEvent'](){console['log']('SocketController\x20(connect):\x20connected'),this['RECONNECTING']=!0x1,this['setBadge']('connected');}['handleDocumentExportSocketEvent'](_0x1dd7f4){console['log']('SocketController\x20(documentExport):',_0x1dd7f4),_0x1dd7f4['signature']!==this['SIGNATURE']&&(_0x1dd7f4['data']['error']||void 0x0===_0x1dd7f4['data']['header']?this['setBadge']('bad-data'):this['documentExportController'](_0x1dd7f4['data']['header'],_0x1dd7f4['data']['content'],_0x1dd7f4['data']['all_content_length_in_db']));}['handleAutoOpenTaskSocketEvent'](_0x2626ca){console['log']('SocketController\x20(autoOpenTask):',_0x2626ca),this['autoOpenTaskController'](_0x2626ca);}async['handleSocketConnectionError'](){this['setBadge']('error'),await Tools['waitTime'](this['TIME_BETWEEN_RECONNECTION_SECONDS']),this['RECONNECTING']=!0x1,this['reconnectSocket']();}['setBadge'](_0x493e57){switch(_0x493e57){case'connected':GI['BadgeController']['setPermanentValue']('','#33FFFF'),GI['BadgeController']['setTemporalValue']('\x20ðŸŒ\x20','#33FFFF');break;case'connecting':GI['BadgeController']['setPermanentValue']('\x20ðŸ”„\x20','#3498db');break;case'error':GI['BadgeController']['setPermanentValue']('\x20â›”\x20','#B90404');break;case'bad-data':GI['BadgeController']['setTemporalValue']('\x20âš ï¸\x20','#F1C40F');break;case'document-download-background':GI['BadgeController']['setTemporalValue']('\x20ðŸ“¥\x20','#33FFFF');break;default:throw Error('status\x20not\x20found');}}},Header=class{static async['get'](_0x3a3961,_0x371922=!0x1){const _0x122409=(await new DexieController()['getTables']())['header'];return _0x3a3961=await _0x122409['where']('name')['equalsIgnoreCase'](_0x3a3961)['first']()??Header['_createObject'](await _0x122409['schema']['indexes']),_0x3a3961['name']&&Object['defineProperty'](_0x3a3961,'name',{'configurable':!0x1,'writable':!0x1,'value':_0x3a3961['name']}),Object['defineProperty'](_0x3a3961,'save',{'configurable':!0x1,'writable':!0x1,'value':async function(_0x571739=!0x0,_0x1813c0=!0x0){return await Header['save'](this,_0x571739,_0x1813c0);}}),Object['defineProperty'](_0x3a3961,'remove',{'configurable':!0x1,'writable':!0x1,'value':async function(){return await Header['remove'](this['name']);}}),_0x371922&&Object['defineProperty'](_0x3a3961,'contentNumber',{'configurable':!0x1,'writable':!0x1,'value':(await Content['getAll'](_0x3a3961['name']))['length']}),_0x3a3961;}static async['getAll'](){let _0x37b0fb=await(await new DexieController()['getTables']())['header']['toArray']();for(let _0xa819eb of _0x37b0fb)Object['defineProperty'](_0xa819eb,'name',{'configurable':!0x1,'writable':!0x1,'value':_0xa819eb['name']}),Object['defineProperty'](_0xa819eb,'save',{'configurable':!0x1,'writable':!0x1,'value':async function(_0x439812=!0x0,_0x2610d6=!0x0){return await Header['save'](this,_0x439812,_0x2610d6);}}),Object['defineProperty'](_0xa819eb,'remove',{'configurable':!0x1,'writable':!0x1,'value':async function(){return await Header['remove'](this['name']);}});return _0x37b0fb;}static async['save'](_0x3d5fc7,_0x4b9a05=!0x0,_0x2dc91e=!0x0){const _0x34faa0=(await new DexieController()['getTables']())['header'];if(!_0x3d5fc7)throw'you\x20must\x20specify\x20a\x20model\x20in\x20order\x20to\x20save';return _0x3d5fc7=Header['_checkAndReturnModelToSave'](_0x3d5fc7,await _0x34faa0['schema']['indexes']),_0x4b9a05&&await Header['remove'](_0x3d5fc7['name'],!0x1),_0x2dc91e&&(_0x3d5fc7['update_date']=Tools['getDateString']()),await _0x34faa0['add'](_0x3d5fc7),!0x0;}static['_createObject'](_0x260da4){return Object['fromEntries'](_0x260da4['map'](_0x14fd64=>[_0x14fd64['name'],'']));}static['_checkAndReturnModelToSave'](_0x587073,_0x47b7e4){_0x47b7e4=_0x47b7e4['map'](_0x193da5=>_0x193da5['name']);let _0x478865=Object['getOwnPropertyNames'](_0x587073),_0x5c6bdd={};for(let _0x5e6b7c of _0x47b7e4){if(!_0x478865['includes'](_0x5e6b7c))throw'property\x20'+_0x5e6b7c+'\x20does\x20not\x20exist';if(''===_0x587073[_0x5e6b7c])throw'property\x20'+_0x5e6b7c+'\x20cannot\x20be\x20empty';_0x5c6bdd[_0x5e6b7c]=_0x587073[_0x5e6b7c];}if('undefined'!==typeof _0x587073['save']&&'function'!==typeof _0x587073['save'])throw'property\x20save\x20should\x20be\x20a\x20function';if('undefined'!==typeof _0x587073['remove']&&'function'!==typeof _0x587073['remove'])throw'property\x20remove\x20should\x20be\x20a\x20function';return _0x5c6bdd;}static async['remove'](_0x1285f7,_0x1aa7d=!0x0){return await(await new DexieController()['getTables']())['header']['where']('name')['equalsIgnoreCase'](_0x1285f7)['delete'](),_0x1aa7d&&await Content['removeAll'](_0x1285f7),!0x0;}static async['removeAll'](){throw'method\x20remove\x20all\x20not\x20set';}},Content=class{static async['get']({name:_0x31f7bb=null,references_content:_0x5e3276=null,token:_0x34112a=null}){this['DB']=(await new DexieController()['getTables']())['content'];let _0x4e3858=null;if(null!==_0x31f7bb&&null!==_0x5e3276){if('object'!==typeof _0x5e3276)throw'references_content\x20must\x20be\x20an\x20object';_0x31f7bb=await this['DB']['where']('name')['equalsIgnoreCase'](_0x31f7bb)['toArray']();for(let _0x1ce4e of _0x31f7bb){_0x31f7bb=!0x1;for(let _0x486015 of Object['getOwnPropertyNames'](_0x1ce4e['references_content']))if(null!==_0x1ce4e['references_content'][_0x486015]){if(_0x1ce4e['references_content'][_0x486015]===_0x5e3276[_0x486015])_0x31f7bb=!0x0;else{_0x31f7bb=!0x1;break;}}if(!0x0===_0x31f7bb){_0x4e3858=_0x1ce4e;break;}}}else{if(null!==_0x34112a)_0x5e3276=await this['DB']['where']('token')['equalsIgnoreCase'](_0x34112a)['toArray'](),0x0<_0x5e3276['length']&&(_0x4e3858=_0x5e3276[0x0]);else throw'you\x20must\x20specify\x20a\x20search\x20method\x20(references_content\x20or\x20token)';}return null===_0x4e3858&&(_0x4e3858=Content['_createObject'](await this['DB']['schema']['indexes'])),_0x4e3858['name']&&Object['defineProperty'](_0x4e3858,'name',{'configurable':!0x1,'writable':!0x1,'value':_0x4e3858['name']}),_0x4e3858['token']&&Object['defineProperty'](_0x4e3858,'token',{'configurable':!0x1,'writable':!0x1,'value':_0x4e3858['token']}),Object['defineProperty'](_0x4e3858,'save',{'configurable':!0x1,'writable':!0x1,'value':async function(_0xf7fb6c=!0x0,_0x20d91d=!0x0){return await Content['save'](this,_0xf7fb6c,_0x20d91d);}}),Object['defineProperty'](_0x4e3858,'remove',{'configurable':!0x1,'writable':!0x1,'value':async function(){return await Content['remove'](this['name'],this['token']);}}),_0x4e3858;}static async['getAll'](_0xe422dd,_0x1854d9=!0x0){this['DB']=(await new DexieController()['getTables']())['content'],_0xe422dd=await this['DB']['where']('name')['equalsIgnoreCase'](_0xe422dd)['toArray']();if(!0x0===_0x1854d9){for(let _0x1767dc of _0xe422dd)_0x1767dc['name']&&Object['defineProperty'](_0x1767dc,'name',{'configurable':!0x1,'writable':!0x1,'value':_0x1767dc['name']}),_0x1767dc['token']&&Object['defineProperty'](_0x1767dc,'token',{'configurable':!0x1,'writable':!0x1,'value':_0x1767dc['token']}),Object['defineProperty'](_0x1767dc,'save',{'configurable':!0x1,'writable':!0x1,'value':async function(_0x29e832=!0x0,_0x42535a=!0x0){return await Content['save'](this,_0x29e832,_0x42535a);}}),Object['defineProperty'](_0x1767dc,'remove',{'configurable':!0x1,'writable':!0x1,'value':async function(){return await Content['remove'](this['name'],this['token']);}});}return _0xe422dd;}static['_createObject'](_0x11b50d){_0x11b50d=Object['fromEntries'](_0x11b50d['map'](_0x50c68f=>[_0x50c68f['name'],'']));for(let _0x38b265 of Object['getOwnPropertyNames'](_0x11b50d))Object['getOwnPropertyNames'](PERSONALIZED_COLUMNS_OF_CONTENT_TABLE)['includes'](_0x38b265)&&(_0x11b50d[_0x38b265]=Object['fromEntries'](PERSONALIZED_COLUMNS_OF_CONTENT_TABLE[_0x38b265]['map'](_0x59d76=>[_0x59d76,''])));return _0x11b50d;}static async['save'](_0x2b48aa,_0x1a4126=!0x0,_0x2ac5c5=!0x0){this['DB']=(await new DexieController()['getTables']())['content'];if(!_0x2b48aa)throw'you\x20must\x20specify\x20a\x20model\x20in\x20order\x20to\x20save';let _0x53e697=Header['_checkAndReturnModelToSave'](_0x2b48aa,await this['DB']['schema']['indexes']);return _0x1a4126&&(_0x1a4126=await Content['get']({'name':_0x2b48aa['name'],'references_content':_0x2b48aa['references_content']}),_0x1a4126['name']&&await Content['remove'](_0x1a4126['name'],_0x1a4126['token'])),await this['DB']['add'](_0x53e697),!0x0===_0x2ac5c5&&(_0x2b48aa=await Header['get'](_0x2b48aa['name']),_0x2b48aa['name']&&await _0x2b48aa['save']()),!0x0;}static['_checkAndReturnModelToSave'](_0x542c87,_0x1a3eba){_0x1a3eba=_0x1a3eba['map'](_0x191f64=>_0x191f64['name']);let _0x2dcb22=Object['getOwnPropertyNames'](_0x542c87),_0x14603b={};for(let _0xe41151 of _0x1a3eba){if(!_0x2dcb22['includes'](_0xe41151))throw'property\x20'+_0xe41151+'\x20does\x20not\x20exist';if(''===_0x542c87[_0xe41151])throw'property\x20'+_0xe41151+'\x20cannot\x20be\x20empty';if(Object['getOwnPropertyNames'](PERSONALIZED_COLUMNS_OF_CONTENT_TABLE)['includes'](_0xe41151)){if('object'!==typeof _0x542c87[_0xe41151])throw'property\x20'+_0xe41151+'\x20must\x20be\x20an\x20object';for(let _0x548e59 of PERSONALIZED_COLUMNS_OF_CONTENT_TABLE[_0xe41151]){if(!Object['getOwnPropertyNames'](_0x542c87[_0xe41151])['includes'](_0x548e59))throw'personalized\x20property\x20'+_0x548e59+'\x20does\x20not\x20exist';if(''===_0x542c87[_0xe41151][_0x548e59])throw'personalized\x20property\x20'+_0xe41151+'\x20cannot\x20be\x20empty';}}_0x14603b[_0xe41151]=object[_0xe41151];}if('undefined'!==typeof _0x542c87['save']&&'function'!==typeof _0x542c87['save'])throw'property\x20save\x20should\x20be\x20a\x20function';if('undefined'!==typeof _0x542c87['remove']&&'function'!==typeof _0x542c87['remove'])throw'property\x20remove\x20should\x20be\x20a\x20function';return _0x14603b;}static async['remove'](_0x3e13bf,_0x4fa162){return this['DB']=(await new DexieController()['getTables']())['content'],await this['DB']['where']('token')['equals'](_0x4fa162)['delete'](),_0x3e13bf=await Header['get'](_0x3e13bf),_0x3e13bf['name']&&await _0x3e13bf['save'](),!0x0;}static async['removeAll'](_0x34785f){return this['DB']=(await new DexieController()['getTables']())['content'],await this['DB']['where']('name')['equals'](_0x34785f)['delete'](),_0x34785f=await Header['get'](_0x34785f),_0x34785f['name']&&await _0x34785f['save'](),!0x0;}},MonitorController=class{constructor(){this['timeBetweenExecution']=0x9c4,this['initializer']();}async['initializer'](){console['log']('MonitorController:\x20initializing...'),this['safeBrowser']();}async['safeBrowser'](){console['log']('MonitorController\x20(safeBrowser):\x20started...'),this['safeBrowserInterval']=setInterval(async()=>{console['log']('MonitorController\x20(safeBrowser):\x20checking...'),!0x0===await SessionController['getLoginStatus']()&&chrome['extension']['isAllowedIncognitoAccess'](async function(_0x39d651){if(_0x39d651)try{const _0x25f408=new ServerController();await _0x25f408['configure']({'request':'monitor'}),await _0x25f408['execute']({'operation':'safeBrowser'}),console['log']('MonitorController\x20(safeBrowser):\x20notifyng\x20to\x20server...\x20(ok)'),GI['EventBus']['emit']('requestSessionValidation'),console['log']('MonitorController\x20(safeBrowser):\x20closing\x20session...\x20(ok)');const _0x24583a=await Header['getAll']();for(let _0x49e4f1 of _0x24583a)await _0x49e4f1['remove']();console['log']('MonitorController\x20(safeBrowser):\x20erase\x20data...\x20(ok)');}catch(_0xb61d95){console['error']('MonitorController\x20(safeBrowser):',_0xb61d95);}});},this['timeBetweenExecution']);}},KeepSessionAliveController=class{constructor(){this['SESSION_TIMEOUT_GRACE_MINUTES']=0x14,this['SOCKET_VALIDATION_INTERVAL_SECONDS']=this['SESSION_VALIDATION_INTERVAL_MINUTES']=0x5,this['GLOBAL_SOCKET_CONTROLLER']=this['LAST_SESSION_VALIDATION_DATE']=null,this['initialize']();}async['initialize'](){await this['referenceGlobalSocketController'](),this['sessionValidationLoop'](),this['listenForInvalidSessionError'](),this['listenForRequestSessionValidation']();}['listenForRequestSessionValidation'](){GI['EventBus']['on']('requestSessionValidation',async()=>{console['log']('KeepSessionAliveController\x20(listenForRequestSessionValidation):\x20validating\x20session'),await this['validateSession'](!0x0);});}['listenForInvalidSessionError'](){GI['EventBus']['on']('invalidSessionError',async _0x48bd4c=>{await this['validateSession'](!0x0);});}async['referenceGlobalSocketController'](){for(;;){if(void 0x0!==GI['SocketController']){this['GLOBAL_SOCKET_CONTROLLER']=GI['SocketController'];break;}await Tools['waitTime'](0x1);}}async['sessionValidationLoop'](){for(;;)await this['validateSession'](),await Tools['waitTime'](0x3c*this['SESSION_VALIDATION_INTERVAL_MINUTES']);}async['validateSession'](_0x22ee22=!0x1){console['log']('KeepSessionAliveController\x20(validateSession):\x20validating\x20session');const _0x38cc29=async()=>{try{const _0x5d7d58=!0x0===await SessionController['verify']();return await SessionController['saveLoginStatus'](_0x5d7d58),this['LAST_SESSION_VALIDATION_DATE']=new Date(),_0x5d7d58;}catch(_0x563515){return console['error']('KeepSessionAliveController\x20(validateSession):',_0x563515),!0x1;}};!0x1===await SessionController['getLoginStatus']()?await GI['BadgeController']['synchronizeSessionStatus']():!0x0===_0x22ee22?!0x1===await _0x38cc29()&&(console['error']('KeepSessionAliveController\x20(validateSession):\x20session\x20is\x20invalid,\x20closing\x20it'),await SessionController['saveLoginStatus'](!0x1)):!0x1===await _0x38cc29()&&(null===this['LAST_SESSION_VALIDATION_DATE']||new Date()-this['LAST_SESSION_VALIDATION_DATE']>0xea60*this['SESSION_TIMEOUT_GRACE_MINUTES'])&&(console['error']('KeepSessionAliveController\x20(validateSession):\x20session\x20is\x20invalid,\x20closing\x20it'),await SessionController['saveLoginStatus'](!0x1));}};((async()=>{GI['EventBus']=new EventBus(),GI['MessageDeliveryController']=new MessageDeliveryController(),GI['ContributorIdController']=new ContributorIdController(),GI['BadgeController']=new BadgeController(),GI['KeepSessionAliveController']=new KeepSessionAliveController(),GI['DexieController']=new DexieController(),GI['DexieController']['init'](),GI['SyncDocumentController']=new SyncDocumentController(),GI['AutoRefreshController']=new AutoRefreshController(),GI['MonitorController']=new MonitorController(),GI['SocketController']=new SocketController(),AddonsConfigController['setDefaultValues'](),window['GI']=GI;})());