var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.arrayIteratorImpl=function(w){var D=0;return function(){return D<w.length?{done:!1,value:w[D++]}:{done:!0}}};$jscomp.arrayIterator=function(w){return{next:$jscomp.arrayIteratorImpl(w)}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;$jscomp.ISOLATE_POLYFILLS=!1;
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(w,D,J){if(w==Array.prototype||w==Object.prototype)return w;w[D]=J.value;return w};$jscomp.getGlobal=function(w){w=["object"==typeof globalThis&&globalThis,w,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var D=0;D<w.length;++D){var J=w[D];if(J&&J.Math==Math)return J}throw Error("Cannot find global object");};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.IS_SYMBOL_NATIVE="function"===typeof Symbol&&"symbol"===typeof Symbol("x");$jscomp.TRUST_ES6_POLYFILLS=!$jscomp.ISOLATE_POLYFILLS||$jscomp.IS_SYMBOL_NATIVE;$jscomp.polyfills={};$jscomp.propertyToPolyfillSymbol={};$jscomp.POLYFILL_PREFIX="$jscp$";var $jscomp$lookupPolyfilledValue=function(w,D){var J=$jscomp.propertyToPolyfillSymbol[D];if(null==J)return w[D];J=w[J];return void 0!==J?J:w[D]};
$jscomp.polyfill=function(w,D,J,N){D&&($jscomp.ISOLATE_POLYFILLS?$jscomp.polyfillIsolated(w,D,J,N):$jscomp.polyfillUnisolated(w,D,J,N))};$jscomp.polyfillUnisolated=function(w,D,J,N){J=$jscomp.global;w=w.split(".");for(N=0;N<w.length-1;N++){var Q=w[N];if(!(Q in J))return;J=J[Q]}w=w[w.length-1];N=J[w];D=D(N);D!=N&&null!=D&&$jscomp.defineProperty(J,w,{configurable:!0,writable:!0,value:D})};
$jscomp.polyfillIsolated=function(w,D,J,N){var Q=w.split(".");w=1===Q.length;N=Q[0];N=!w&&N in $jscomp.polyfills?$jscomp.polyfills:$jscomp.global;for(var Ca=0;Ca<Q.length-1;Ca++){var Da=Q[Ca];if(!(Da in N))return;N=N[Da]}Q=Q[Q.length-1];J=$jscomp.IS_SYMBOL_NATIVE&&"es6"===J?N[Q]:null;D=D(J);null!=D&&(w?$jscomp.defineProperty($jscomp.polyfills,Q,{configurable:!0,writable:!0,value:D}):D!==J&&($jscomp.propertyToPolyfillSymbol[Q]=$jscomp.IS_SYMBOL_NATIVE?$jscomp.global.Symbol(Q):$jscomp.POLYFILL_PREFIX+
Q,Q=$jscomp.propertyToPolyfillSymbol[Q],$jscomp.defineProperty(N,Q,{configurable:!0,writable:!0,value:D})))};$jscomp.initSymbol=function(){};
$jscomp.polyfill("Symbol",function(w){if(w)return w;var D=function(Q,Ca){this.$jscomp$symbol$id_=Q;$jscomp.defineProperty(this,"description",{configurable:!0,writable:!0,value:Ca})};D.prototype.toString=function(){return this.$jscomp$symbol$id_};var J=0,N=function(Q){if(this instanceof N)throw new TypeError("Symbol is not a constructor");return new D("jscomp_symbol_"+(Q||"")+"_"+J++,Q)};return N},"es6","es3");$jscomp.initSymbolIterator=function(){};
$jscomp.polyfill("Symbol.iterator",function(w){if(w)return w;w=Symbol("Symbol.iterator");for(var D="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),J=0;J<D.length;J++){var N=$jscomp.global[D[J]];"function"===typeof N&&"function"!=typeof N.prototype[w]&&$jscomp.defineProperty(N.prototype,w,{configurable:!0,writable:!0,value:function(){return $jscomp.iteratorPrototype($jscomp.arrayIteratorImpl(this))}})}return w},"es6",
"es3");$jscomp.initSymbolAsyncIterator=function(){};$jscomp.iteratorPrototype=function(w){w={next:w};w[Symbol.iterator]=function(){return this};return w};
(function(w,D){"object"===typeof exports&&"undefined"!==typeof module?module.exports=D():"function"===typeof define&&define.amd?define(D):w.Dexie=D()})(this,function(){function w(a,b){if("object"!==typeof b)return a;Y(b).forEach(function(g){a[g]=b[g]});return a}function D(a,b){"function"===typeof b&&(b=b(kc(a)));Y(b).forEach(function(g){J(a,g,b[g])})}function J(a,b,g,l){Pc(a,b,w(g&&sa.call(g,"get")&&"function"===typeof g.get?{get:g.get,set:g.set,configurable:!0}:{value:g,configurable:!0,writable:!0},
l))}function N(a){return{from:function(b){a.prototype=Object.create(b.prototype);J(a.prototype,"constructor",a);return{extend:D.bind(null,a.prototype)}}}}function Q(a,b){var g;return Qc(a,b)||(g=kc(a))&&Q(g,b)}function Ca(a,b){return b(a)}function Da(a){if(!a)throw Error("Assertion Failed");}function lc(a){R.setImmediate?setImmediate(a):setTimeout(a,0)}function mc(a,b){return a.reduce(function(g,l,r){(l=b(l,r))&&(g[l[0]]=l[1]);return g},{})}function nc(a,b){return function(){try{a.apply(this,arguments)}catch(g){b(g)}}}
function $a(a,b,g){try{a.apply(null,g)}catch(l){b&&b(l)}}function ua(a,b){if(sa.call(a,b))return a[b];if(!b)return a;if("string"!==typeof b){for(var g=[],l=0,r=b.length;l<r;++l){var v=ua(a,b[l]);g.push(v)}return g}g=b.indexOf(".");if(-1!==g)return l=a[b.substr(0,g)],void 0===l?void 0:ua(l,b.substr(g+1))}function oa(a,b,g){if(a&&void 0!==b&&!("isFrozen"in Object&&Object.isFrozen(a)))if("string"!==typeof b&&"length"in b){Da("string"!==typeof g&&"length"in g);for(var l=0,r=b.length;l<r;++l)oa(a,b[l],
g[l])}else r=b.indexOf("."),-1!==r?(l=b.substr(0,r),b=b.substr(r+1),""===b?void 0===g?delete a[l]:a[l]=g:((r=a[l])||(r=a[l]={}),oa(r,b,g))):void 0===g?delete a[b]:a[b]=g}function Kb(a){var b={},g;for(g in a)sa.call(a,g)&&(b[g]=a[g]);return b}function Ia(a){if(!a||"object"!==typeof a)return a;if(ya(a)){var b=[];for(var g=0,l=a.length;g<l;++g)b.push(Ia(a[g]))}else if(0<=Rc.indexOf(a.constructor))b=a;else for(g in b=a.constructor?Object.create(a.constructor.prototype):{},a)sa.call(a,g)&&(b[g]=Ia(a[g]));
return b}function Lb(a,b,g,l){g=g||{};l=l||"";Y(a).forEach(function(r){if(sa.call(b,r)){var v=a[r],H=b[r];"object"===typeof v&&"object"===typeof H&&v&&H&&""+v.constructor===""+H.constructor?Lb(v,H,g,l+r+"."):v!==H&&(g[l+r]=b[r])}else g[l+r]=void 0});Y(b).forEach(function(r){sa.call(a,r)||(g[l+r]=b[r])});return g}function Ja(a){var b,g,l;if(1===arguments.length){if(ya(a))return a.slice();if(this===Sa&&"string"===typeof a)return[a];if(l=Sc(a)){for(g=[];b=l.next(),!b.done;)g.push(b.value);return g}if(null==
a)return[a];b=a.length;if("number"===typeof b){for(g=Array(b);b--;)g[b]=a[b];return g}return[a]}b=arguments.length;for(g=Array(b);b--;)g[b]=arguments[b];return g}function oc(a,b){Ea=a;pc=b}function Fa(){if(Tc)try{throw Fa.arguments,Error();}catch(a){return a}return Error()}function qb(a,b){var g=a.stack;if(!g)return"";b=b||0;0===g.indexOf(a.name)&&(b+=(a.name+a.message).split("\n").length);return g.split("\n").slice(b).filter(pc).map(function(l){return"\n"+l}).join("")}function Uc(a,b){return function(){console.warn(a+
" is deprecated. See https://github.com/dfahlander/Dexie.js/wiki/Deprecations. "+qb(Fa(),1));return b.apply(this,arguments)}}function Ta(a,b){this._e=Fa();this.name=a;this.message=b}function Vc(a,b){return a+". Errors: "+b.map(function(g){return g.toString()}).filter(function(g,l,r){return r.indexOf(g)===l}).join("\n")}function rb(a,b,g,l){this._e=Fa();this.failures=b;this.failedKeys=l;this.successCount=g}function ab(a,b){this._e=Fa();this.name="BulkError";this.failures=b;this.message=Vc(a,b)}function O(){}
function bb(a){return a}function Wc(a,b){return null==a||a===bb?b:function(g){return b(a(g))}}function Ka(a,b){return function(){a.apply(this,arguments);b.apply(this,arguments)}}function Xc(a,b){return a===O?b:function(){var g=a.apply(this,arguments);void 0!==g&&(arguments[0]=g);var l=this.onsuccess,r=this.onerror;this.onerror=this.onsuccess=null;var v=b.apply(this,arguments);l&&(this.onsuccess=this.onsuccess?Ka(l,this.onsuccess):l);r&&(this.onerror=this.onerror?Ka(r,this.onerror):r);return void 0!==
v?v:g}}function Yc(a,b){return a===O?b:function(){a.apply(this,arguments);var g=this.onsuccess,l=this.onerror;this.onsuccess=this.onerror=null;b.apply(this,arguments);g&&(this.onsuccess=this.onsuccess?Ka(g,this.onsuccess):g);l&&(this.onerror=this.onerror?Ka(l,this.onerror):l)}}function Zc(a,b){return a===O?b:function(g){var l=a.apply(this,arguments);w(g,l);var r=this.onsuccess,v=this.onerror;this.onerror=this.onsuccess=null;var H=b.apply(this,arguments);r&&(this.onsuccess=this.onsuccess?Ka(r,this.onsuccess):
r);v&&(this.onerror=this.onerror?Ka(v,this.onerror):v);return void 0===l?void 0===H?void 0:H:w(l,H)}}function $c(a,b){return a===O?b:function(){return!1===b.apply(this,arguments)?!1:a.apply(this,arguments)}}function qc(a,b){return a===O?b:function(){var g=a.apply(this,arguments);if(g&&"function"===typeof g.then){for(var l=this,r=arguments.length,v=Array(r);r--;)v[r]=arguments[r];return g.then(function(){return b.apply(l,v)})}return b.apply(this,arguments)}}function A(a,b,g){if("object"!==typeof this)throw new TypeError("Promises must be constructed via new");
this._listeners=[];this.onuncatched=O;this._lib=!1;var l=this._PSD=F;Ea&&(this._stackHolder=Fa(),this._prev=null,this._numPrev=0);if("function"!==typeof a){if(a!==cb)throw new TypeError("Not a function");this._state=b;this._value=g;!1===this._state&&Mb(this,this._value)}else this._value=this._state=null,++l.ref,rc(this,a)}function sc(a,b,g,l,r){this.onFulfilled="function"===typeof a?a:null;this.onRejected="function"===typeof b?b:null;this.resolve=g;this.reject=l;this.psd=r}function rc(a,b){try{b(function(g){if(null===
a._state){if(g===a)throw new TypeError("A promise cannot be resolved with itself.");var l=a._lib&&sb();g&&"function"===typeof g.then?rc(a,function(r,v){g instanceof A?g._then(r,v):g.then(r,v)}):(a._state=!0,a._value=g,tc(a));l&&tb()}},Mb.bind(null,a))}catch(g){Mb(a,g)}}function Mb(a,b){ub.push(b);if(null===a._state){var g=a._lib&&sb();b=Nb(b);a._state=!1;a._value=b;Ea&&null!==b&&"object"===typeof b&&!b._promise&&$a(function(){var l=Q(b,"stack");b._promise=a;J(b,"stack",{get:function(){return Ob?l&&
(l.get?l.get.apply(b):l.value):a.stack}})});ad(a);tc(a);g&&tb()}}function tc(a){var b=a._listeners;a._listeners=[];for(var g=0,l=b.length;g<l;++g)Pb(a,b[g]);a=a._PSD;--a.ref||a.finalize();0===La&&(++La,db(function(){0===--La&&Qb()},[]))}function Pb(a,b){if(null===a._state)a._listeners.push(b);else{var g=a._state?b.onFulfilled:b.onRejected;if(null===g)return(a._state?b.resolve:b.reject)(a._value);++b.psd.ref;++La;db(bd,[g,a,b])}}function bd(a,b,g){try{Rb=b;var l=b._value;if(b._state)var r=a(l);else if(ub.length&&
(ub=[]),r=a(l),-1===ub.indexOf(l))a:for(var v=Ma.length;v;)if(Ma[--v]._value===b._value){Ma.splice(v,1);break a}g.resolve(r)}catch(H){g.reject(H)}finally{Rb=null,0===--La&&Qb(),--g.psd.ref||g.psd.finalize()}}function uc(a,b,g){if(b.length===g)return b;var l="";if(!1===a._state){var r=a._value;if(null!=r){var v=r.name||"Error";var H=r.message||r;l=qb(r,0)}else v=r,H="";b.push(v+(H?": "+H:"")+l)}Ea&&((l=qb(a._stackHolder,2))&&-1===b.indexOf(l)&&b.push(l),a._prev&&uc(a._prev,b,g));return b}function vc(a,
b){var g=b?b._numPrev+1:0;100>g&&(a._prev=b,a._numPrev=g)}function vb(){sb()&&tb()}function sb(){var a=Sb;wb=Sb=!1;return a}function tb(){var a;do for(;0<eb.length;){var b=eb;eb=[];var g=b.length;for(a=0;a<g;++a){var l=b[a];l[0].apply(null,l[1])}}while(0<eb.length);wb=Sb=!0}function Qb(){var a=Ma;Ma=[];a.forEach(function(g){g._PSD.onunhandled.call(null,g._value,g)});a=xb.slice(0);for(var b=a.length;b;)a[--b]()}function cd(a){function b(){a();xb.splice(xb.indexOf(b),1)}xb.push(b);++La;db(function(){0===
--La&&Qb()},[])}function ad(a){Ma.some(function(b){return b._value===a._value})||Ma.push(a)}function yb(a){return new A(cb,!1,a)}function U(a,b){var g=F;return function(){var l=sb(),r=F;try{return Ga(g,!0),a.apply(this,arguments)}catch(v){b&&b(v)}finally{Ga(r,!1),l&&tb()}}}function Na(a,b,g,l){var r=F,v=Object.create(r);v.parent=r;v.ref=0;v.global=!1;v.id=++dd;var H=Ua.env;v.env=Tb?{Promise:A,PromiseProp:{value:A,configurable:!0,writable:!0},all:A.all,race:A.race,resolve:A.resolve,reject:A.reject,
nthen:wc(H.nthen,v),gthen:wc(H.gthen,v)}:{};b&&w(v,b);++r.ref;v.finalize=function(){--this.parent.ref||this.parent.finalize()};a=fb(v,a,g,l);0===v.ref&&v.finalize();return a}function Ub(){Z.id||(Z.id=++ed);++Z.awaits;Z.echoes+=7;return Z.id}function zb(a){!Z.awaits||a&&a!==Z.id||(0===--Z.awaits&&(Z.id=0),Z.echoes=7*Z.awaits)}function xc(a){return Z.echoes&&a&&a.constructor===yc?(Ub(),a.then(function(b){zb();return b},function(b){zb();return ia(b)})):a}function fd(a){++Vb;Z.echoes&&0!==--Z.echoes||
(Z.echoes=Z.id=0);Ab.push(F);Ga(a,!0)}function gd(){var a=Ab[Ab.length-1];Ab.pop();Ga(a,!1)}function Ga(a,b){var g=F;(b?!Z.echoes||Wb++&&a===F:!Wb||--Wb&&a===F)||hd.call(Xb,b?fd.bind(null,a):gd);if(a!==F&&(F=a,g===Ua&&(Ua.env=zc()),Tb)){var l=Ua.env.Promise,r=a.env;Bb.then=r.nthen;l.prototype.then=r.gthen;if(g.global||a.global)Object.defineProperty(R,"Promise",r.PromiseProp),l.all=r.all,l.race=r.race,l.resolve=r.resolve,l.reject=r.reject}}function zc(){var a=R.Promise;return Tb?{Promise:a,PromiseProp:Object.getOwnPropertyDescriptor(R,
"Promise"),all:a.all,race:a.race,resolve:a.resolve,reject:a.reject,nthen:Bb.then,gthen:a.prototype.then}:{}}function fb(a,b,g,l,r){var v=F;try{return Ga(a,!0),b(g,l,r)}finally{Ga(v,!1)}}function Cb(a,b,g){return"function"!==typeof a?a:function(){var l=F;g&&Ub();Ga(b,!0);try{return a.apply(this,arguments)}finally{Ga(l,!1)}}}function wc(a,b){return function(g,l){return a.call(this,Cb(g,b,!1),Cb(l,b,!1))}}function Ac(a,b){try{var g=b.onuncatched(a)}catch(r){}if(!1!==g)try{g={promise:b,reason:a};if(R.document&&
document.createEvent){var l=document.createEvent("Event");l.initEvent(Bc,!0,!0);w(l,g)}else R.CustomEvent&&(l=new CustomEvent(Bc,{detail:g}),w(l,g));if(l&&R.dispatchEvent&&(dispatchEvent(l),!R.PromiseRejectionEvent&&R.onunhandledrejection))try{R.onunhandledrejection(l)}catch(r){}l.defaultPrevented||console.warn("Unhandled rejection: "+(a.stack||a))}catch(r){}}function Db(a){function b(P,aa,ca){if("object"===typeof P)return g(P);aa||(aa=$c);ca||(ca=O);var ja={subscribers:[],fire:ca,subscribe:function(da){-1===
ja.subscribers.indexOf(da)&&(ja.subscribers.push(da),ja.fire=aa(ja.fire,da))},unsubscribe:function(da){ja.subscribers=ja.subscribers.filter(function(va){return va!==da});ja.fire=ja.subscribers.reduce(aa,ca)}};return l[P]=r[P]=ja}function g(P){Y(P).forEach(function(aa){var ca=P[aa];if(ya(ca))b(aa,P[aa][0],P[aa][1]);else if("asap"===ca)var ja=b(aa,bb,function(){for(var da=arguments.length,va=Array(da);da--;)va[da]=arguments[da];ja.subscribers.forEach(function(Eb){lc(function(){Eb.apply(null,va)})})});
else throw new E.InvalidArgument("Invalid event config");})}var l={},r=function(P,aa){if(aa){for(var ca=arguments.length,ja=Array(ca-1);--ca;)ja[ca-1]=arguments[ca];l[P].subscribe.apply(null,ja);return a}if("string"===typeof P)return l[P]};r.addEventType=b;for(var v=1,H=arguments.length;v<H;++v)b(arguments[v]);return r}function ea(a,b){function g(d){this._cfg={version:d,storesSource:null,dbschema:{},tables:{},contentUpgrade:null};this.stores({})}function l(d,f,m){var k=G._createTransaction("readwrite",
Va,ka);k.create(f);k._completion["catch"](m);var n=k._reject.bind(k);Na(function(){F.trans=k;0===d?(Y(ka).forEach(function(q){H(f,q,ka[q].primKey,ka[q].indexes)}),A.follow(function(){return G.on.populate.fire(k)})["catch"](n)):r(d,k,f)["catch"](n)})}function r(d,f,m){function k(){return n.length?A.resolve(n.shift()(f.idbtrans)).then(k):A.resolve()}var n=[],q=Wa.filter(function(e){return e._cfg.version===d})[0];if(!q)throw new E.Upgrade("Dexie specification of currently installed DB version is missing");
ka=G._dbSchema=q._cfg.dbschema;var c=!1;Wa.filter(function(e){return e._cfg.version>d}).forEach(function(e){n.push(function(){var h=ka,p=e._cfg.dbschema;Yb(h,m);Yb(p,m);ka=G._dbSchema=p;h=v(h,p);h.add.forEach(function(t){H(m,t[0],t[1].primKey,t[1].indexes)});h.change.forEach(function(t){if(t.recreate)throw new E.Upgrade("Not yet support for changing primary key");var y=m.objectStore(t.name);t.add.forEach(function(C){aa(y,C)});t.change.forEach(function(C){y.deleteIndex(C.name);aa(y,C)});t.del.forEach(function(C){y.deleteIndex(C)})});
if(e._cfg.contentUpgrade)return c=!0,A.follow(function(){e._cfg.contentUpgrade(f)})});n.push(function(h){if(!c||!id)for(var p=e._cfg.dbschema,t=0;t<h.db.objectStoreNames.length;++t){var y=h.db.objectStoreNames[t];null==p[y]&&h.db.deleteObjectStore(y)}})});return k().then(function(){P(ka,m)})}function v(d,f){var m={del:[],add:[],change:[]},k;for(k in d)f[k]||m.del.push(k);for(k in f){var n=d[k],q=f[k];if(n){var c={name:k,def:q,recreate:!1,del:[],add:[],change:[]};if(n.primKey.src!==q.primKey.src)c.recreate=
!0,m.change.push(c);else{n=n.idxByName;q=q.idxByName;for(var e in n)q[e]||c.del.push(e);for(e in q){var h=n[e],p=q[e];h?h.src!==p.src&&c.change.push(p):c.add.push(p)}(0<c.del.length||0<c.add.length||0<c.change.length)&&m.change.push(c)}}else m.add.push([k,q])}return m}function H(d,f,m,k){var n=d.db.createObjectStore(f,m.keyPath?{keyPath:m.keyPath,autoIncrement:m.auto}:{autoIncrement:m.auto});k.forEach(function(q){aa(n,q)});return n}function P(d,f){Y(d).forEach(function(m){f.db.objectStoreNames.contains(m)||
H(f,m,d[m].primKey,d[m].indexes)})}function aa(d,f){d.createIndex(f.name,f.keyPath,{unique:f.unique,multiEntry:f.multi})}function ca(d,f,m){if(gb||F.letThrough){var k=G._createTransaction(d,f,ka);try{k.create()}catch(n){return ia(n)}return k._promise(d,function(n,q){return Na(function(){F.trans=k;return m(n,q,k)})}).then(function(n){return k._completion.then(function(){return n})})}if(!Ba){if(!Zb)return ia(new E.DatabaseClosed);G.open()["catch"](O)}return hb.then(function(){return ca(d,f,m)})}function ja(d,
f,m){var k=arguments.length;if(2>k)throw new E.InvalidArgument("Too few arguments");for(var n=Array(k-1);--k;)n[k-1]=arguments[k];m=n.pop();k=Cc.apply([],n);return[d,k,m]}function da(d,f,m){this.name=d;this.schema=f;this._tx=m;this.hook=wa[d]?wa[d].hook:Db(null,{creating:[Xc,O],reading:[Wc,bb],updating:[Zc,O],deleting:[Yc,O]})}function va(d,f,m){return(m?Fb:pa)(function(k){d.push(k);f&&f()})}function Eb(d,f,m,k,n){return new A(function(q,c){var e=m.length,h=e-1;if(0===e)return q();if(k){var p,t=Fb(c),
y=Xa(null);$a(function(){for(var u=0;u<e;++u){p={onsuccess:null,onerror:null};var x=m[u];n.call(p,x[0],x[1],f);x=d["delete"](x[0]);x._hookCtx=p;x.onerror=t;x.onsuccess=u===h?Xa(q):y}},function(u){p.onerror&&p.onerror(u);throw u;})}else for(var C=0;C<e;++C){var B=d["delete"](m[C]);B.onerror=pa(c);C===h&&(B.onsuccess=U(function(){return q()}))}})}function Oa(d,f,m,k){var n=this;this.db=G;this.mode=d;this.storeNames=f;this.idbtrans=null;this.on=Db(this,"complete","error","abort");this.parent=k||null;
this.active=!0;this._reculock=0;this._blockedFuncs=[];this._waitingQueue=this._waitingFor=this._reject=this._resolve=null;this._spinCount=0;this._completion=new A(function(q,c){n._resolve=q;n._reject=c});this._completion.then(function(){n.active=!1;n.on.complete.fire()},function(q){var c=n.active;n.active=!1;n.on.error.fire(q);n.parent?n.parent._reject(q):c&&n.idbtrans&&n.idbtrans.abort();return ia(q)})}function Ha(d,f,m){this._ctx={table:d,index:":id"===f?null:f,or:m}}function la(d,f){var m=null,
k=null;if(f)try{m=f()}catch(c){k=c}var n=d._ctx,q=n.table;this._ctx={table:q,index:n.index,isPrimKey:!n.index||q.schema.primKey.keyPath&&n.index===q.schema.primKey.name,range:m,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:Infinity,error:k,or:n.or,valueMapper:q.hook.reading.fire}}function ib(d,f){return!(d.filter||d.algorithm||d.or)&&(f?d.justLimit:!d.replayFilter)}function jd(d,f){return d._cfg.version-f._cfg.version}function Dc(d,
f,m){f.forEach(function(k){var n=m[k];d.forEach(function(q){k in q||(q===Oa.prototype||q instanceof Oa?J(q,k,{get:function(){return this.table(k)}}):q[k]=new da(k,n))})})}function kd(d){d.forEach(function(f){for(var m in f)f[m]instanceof da&&delete f[m]})}function Ec(d,f,m,k,n,q){var c=U(q?function(e,h,p){return m(q(e),h,p)}:m,n);d.onerror||(d.onerror=pa(n));d.onsuccess=f?nc(function(){var e=d.result;if(e){var h=function(){e["continue"]()};f(e,function(p){h=p},k,n)&&c(e.value,e,function(p){h=p});
h()}else k()},n):nc(function(){var e=d.result;if(e){var h=function(){e["continue"]()};c(e.value,e,function(p){h=p});h()}else k()},n)}function ld(d){var f=[];d.split(",").forEach(function(m){m=m.trim();var k=m.replace(/([&*]|\+\+)/g,""),n=/^\[/.test(k)?k.match(/^\[(.*)\]$/)[1].split("+"):k;f.push(new Ya(k,n||null,/&/.test(m),/\*/.test(m),/\+\+/.test(m),ya(n),/\./.test(m)))});return f}function xa(d,f){return ma.cmp(d,f)}function Gb(d,f){return ma.cmp(f,d)}function md(d,f){return d<f?-1:d===f?0:1}function nd(d,
f){return d>f?-1:d===f?0:1}function Pa(d,f){return d?f?function(){return d.apply(this,arguments)&&f.apply(this,arguments)}:d:f}function od(){G.verno=fa.version/10;G._dbSchema=ka={};Va=$b.call(fa.objectStoreNames,0,void 0);if(0!==Va.length){var d=fa.transaction(ac(Va),"readonly");Va.forEach(function(f){for(var m=d.objectStore(f),k=m.keyPath,n=k&&"string"===typeof k&&-1!==k.indexOf("."),q=new Ya(k,k||"",!1,!1,!!m.autoIncrement,k&&"string"!==typeof k,n),c=[],e=0;e<m.indexNames.length;++e){var h=m.index(m.indexNames[e]);
n=(k=h.keyPath)&&"string"===typeof k&&-1!==k.indexOf(".");k=new Ya(h.name,k,!!h.unique,!!h.multiEntry,!1,k&&"string"!==typeof k,n);c.push(k)}ka[f]=new bc(f,q,c,{})});Dc([wa],Y(ka),ka)}}function Yb(d,f){for(var m=f.db.objectStoreNames,k=0;k<m.length;++k){var n=m[k],q=f.objectStore(n);Hb="getAll"in q;for(var c=0;c<q.indexNames.length;++c){var e=q.indexNames[c],h=q.index(e).keyPath;h="string"===typeof h?h:"["+$b.call(h,void 0,void 0).join("+")+"]";d[n]&&(h=d[n].idxByName[h])&&(h.name=e)}}/Safari/.test(navigator.userAgent)&&
!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&R.WorkerGlobalScope&&R instanceof R.WorkerGlobalScope&&604>[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]&&(Hb=!1)}function Fc(d){G.on("blocked").fire(d);jb.filter(function(f){return f.name===G.name&&f!==G&&!f._vcFired}).map(function(f){return f.on("versionchange").fire(d)})}var Qa=ea.dependencies;Qa=w({addons:ea.addons,autoOpen:!0,indexedDB:Qa.indexedDB,IDBKeyRange:Qa.IDBKeyRange},b);var pd=Qa.addons,Zb=Qa.autoOpen,ma=Qa.indexedDB,za=Qa.IDBKeyRange,
ka=this._dbSchema={},Wa=[],Va=[],wa={},fa=null,ha=null,Ba=!1,Ra=null,gb=!1,G=this,cc,hb=new A(function(d){cc=d}),dc,ec=new A(function(d,f){dc=f}),kb=!0,Hc=!!Gc(ma),Hb;this.version=function(d){if(fa||Ba)throw new E.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,d);var f=Wa.filter(function(m){return m._cfg.version===d})[0];if(f)return f;f=new g(d);Wa.push(f);Wa.sort(jd);kb=!1;return f};w(g.prototype,{stores:function(d){this._cfg.storesSource=this._cfg.storesSource?
w(this._cfg.storesSource,d):d;var f={};Wa.forEach(function(m){w(f,m._cfg.storesSource)});d=this._cfg.dbschema={};this._parseStoresSpec(f,d);ka=G._dbSchema=d;kd([wa,G,Oa.prototype]);Dc([wa,G,Oa.prototype,this._cfg.tables],Y(d),d);Va=Y(d);return this},upgrade:function(d){this._cfg.contentUpgrade=d;return this},_parseStoresSpec:function(d,f){Y(d).forEach(function(m){if(null!==d[m]){var k={},n=ld(d[m]),q=n.shift();if(q.multi)throw new E.Schema("Primary key cannot be multi-valued");q.keyPath&&oa(k,q.keyPath,
q.auto?0:q.keyPath);n.forEach(function(c){if(c.auto)throw new E.Schema("Only primary key can be marked as autoIncrement (++)");if(!c.keyPath)throw new E.Schema("Index must have a name and cannot be an empty string");oa(k,c.keyPath,c.compound?c.keyPath.map(function(){return""}):"")});f[m]=new bc(m,q,n,k)}})}});this._allTables=wa;this._createTransaction=function(d,f,m,k){return new Oa(d,f,m,k)};this._whenReady=function(d){return gb||F.letThrough?d():(new A(function(f,m){if(!Ba){if(!Zb){m(new E.DatabaseClosed);
return}G.open()["catch"](O)}hb.then(f,m)})).then(d)};this.verno=0;this.open=function(){if(Ba||fa)return hb.then(function(){return ha?ia(ha):G});Ea&&(ec._stackHolder=Fa());Ba=!0;ha=null;gb=!1;var d=cc,f=null;return A.race([ec,new A(function(m,k){if(!ma)throw new E.MissingAPI("indexedDB API not found. If using IE10+, make sure to run your code on a server URL (not locally). If using old Safari versions, make sure to include indexedDB polyfill.");var n=kb?ma.open(a):ma.open(a,Math.round(10*G.verno));
if(!n)throw new E.MissingAPI("IndexedDB API not available");n.onerror=pa(k);n.onblocked=U(Fc);n.onupgradeneeded=U(function(q){f=n.transaction;kb&&!G._allowEmptyDB?(n.onerror=lb,f.abort(),n.result.close(),q=ma.deleteDatabase(a),q.onsuccess=q.onerror=U(function(){k(new E.NoSuchDatabase("Database "+a+" doesnt exist"))})):(f.onerror=pa(k),l((q.oldVersion>Math.pow(2,62)?0:q.oldVersion)/10,f,k,n))},k);n.onsuccess=U(function(){f=null;fa=n.result;jb.push(G);if(kb)od();else if(0<fa.objectStoreNames.length)try{Yb(ka,
fa.transaction(ac(fa.objectStoreNames),"readonly"))}catch(q){}fa.onversionchange=U(function(q){G._vcFired=!0;G.on("versionchange").fire(q)});Hc||"__dbnames"===a||mb.dbnames.put({name:a})["catch"](O);m()},k)})]).then(function(){Ra=[];return A.resolve(ea.vip(G.on.ready.fire)).then(function k(){if(0<Ra.length){var n=Ra.reduce(qc,O);Ra=[];return A.resolve(ea.vip(n)).then(k)}})})["finally"](function(){Ra=null}).then(function(){Ba=!1;return G})["catch"](function(m){try{f&&f.abort()}catch(k){}Ba=!1;G.close();
ha=m;return ia(ha)})["finally"](function(){gb=!0;d()})};this.close=function(){var d=jb.indexOf(G);0<=d&&jb.splice(d,1);if(fa){try{fa.close()}catch(f){}fa=null}Zb=!1;ha=new E.DatabaseClosed;Ba&&dc(ha);hb=new A(function(f){cc=f});ec=new A(function(f,m){dc=m})};this["delete"]=function(){var d=0<arguments.length;return new A(function(f,m){function k(){G.close();var n=ma.deleteDatabase(a);n.onsuccess=U(function(){Hc||mb.dbnames["delete"](a)["catch"](O);f()});n.onerror=pa(m);n.onblocked=Fc}if(d)throw new E.InvalidArgument("Arguments not allowed in db.delete()");
Ba?hb.then(k):k()})};this.backendDB=function(){return fa};this.isOpen=function(){return null!==fa};this.hasBeenClosed=function(){return ha&&ha instanceof E.DatabaseClosed};this.hasFailed=function(){return null!==ha};this.dynamicallyOpened=function(){return kb};this.name=a;D(this,{tables:{get:function(){return Y(wa).map(function(d){return wa[d]})}}});this.on=Db(this,"populate","blocked","versionchange",{ready:[qc,O]});this.on.ready.subscribe=Ca(this.on.ready.subscribe,function(d){return function(f,
m){ea.vip(function(){gb?(ha||A.resolve().then(f),m&&d(f)):Ra?(Ra.push(f),m&&d(f)):(d(f),m||d(function n(){G.on.ready.unsubscribe(f);G.on.ready.unsubscribe(n)}))})}});this.transaction=function(){var d=ja.apply(this,arguments);return this._transaction.apply(this,d)};this._transaction=function(d,f,m){function k(){return A.resolve().then(function(){var e=F.transless||F,h=G._createTransaction(d,c,ka,n);e={trans:h,transless:e};n?h.idbtrans=n.idbtrans:h.create();m.constructor===qd&&Ub();var p;e=A.follow(function(){if(p=
m.call(h,h))if(p.constructor===yc){var t=zb.bind(null,null);p.then(t,t)}else"function"===typeof p.next&&"function"===typeof p["throw"]&&(p=fc(p))},e);return(p&&"function"===typeof p.then?A.resolve(p).then(function(t){return h.active?t:ia(new E.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):e.then(function(){return p})).then(function(t){n&&h._resolve();return h._completion.then(function(){return t})})["catch"](function(t){h._reject(t);return ia(t)})})}var n=F.trans;
n&&n.db===G&&-1===d.indexOf("!")||(n=null);var q=-1!==d.indexOf("?");d=d.replace("!","").replace("?","");try{var c=f.map(function(e){e=e instanceof da?e.name:e;if("string"!==typeof e)throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return e});if("r"==d||"readonly"==d)d="readonly";else if("rw"==d||"readwrite"==d)d="readwrite";else throw new E.InvalidArgument("Invalid transaction mode: "+d);if(n){if("readonly"===n.mode&&"readwrite"===d)if(q)n=null;
else throw new E.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");n&&c.forEach(function(e){if(n&&-1===n.storeNames.indexOf(e))if(q)n=null;else throw new E.SubTransaction("Table "+e+" not included in parent transaction.");});q&&n&&!n.active&&(n=null)}}catch(e){return n?n._promise(null,function(h,p){p(e)}):ia(e)}return n?n._promise(d,k,"lock"):F.trans?fb(F.transless,function(){return G._whenReady(k)}):G._whenReady(k)};this.table=function(d){if(!sa.call(wa,
d))throw new E.InvalidTable("Table "+d+" does not exist");return wa[d]};D(da.prototype,{_trans:function(d,f,m){var k=this._tx||F.trans;return k&&k.db===G?k===F.trans?k._promise(d,f,m):Na(function(){return k._promise(d,f,m)},{trans:k,transless:F.transless||F}):ca(d,[this.name],f)},_idbstore:function(d,f,m){var k=this.name;return this._trans(d,function(n,q,c){if(-1===c.storeNames.indexOf(k))throw new E.NotFound("Table"+k+" not part of transaction");return f(n,q,c.idbtrans.objectStore(k),c)},m)},get:function(d,
f){if(d&&d.constructor===Object)return this.where(d).first(f);var m=this;return this._idbstore("readonly",function(k,n,q){var c=q.get(d);c.onerror=pa(n);c.onsuccess=U(function(){k(m.hook.reading.fire(c.result))},n)}).then(f)},where:function(d){if("string"===typeof d)return new Ha(this,d);if(ya(d))return new Ha(this,"["+d.join("+")+"]");var f=Y(d);if(1===f.length)return this.where(f[0]).equals(d[f[0]]);var m=this.schema.indexes.concat(this.schema.primKey).filter(function(c){return c.compound&&f.every(function(e){return 0<=
c.keyPath.indexOf(e)})&&c.keyPath.every(function(e){return 0<=f.indexOf(e)})})[0];if(m&&nb!==Za)return this.where(m.name).equals(m.keyPath.map(function(c){return d[c]}));m||console.warn("The query "+JSON.stringify(d)+" on "+this.name+" would benefit of a compound index ["+(f.join("+")+"]"));var k=this.schema.idxByName,n=f.reduce(function(c,e){return[c[0]||k[e],c[0]||!k[e]?Pa(c[1],function(h){return""+ua(h,e)==""+d[e]}):c[1]]},[null,null]),q=n[0];return q?this.where(q.name).equals(d[q.keyPath]).filter(n[1]):
m?this.filter(n[1]):this.where(f).equals("")},count:function(d){return this.toCollection().count(d)},offset:function(d){return this.toCollection().offset(d)},limit:function(d){return this.toCollection().limit(d)},reverse:function(){return this.toCollection().reverse()},filter:function(d){return this.toCollection().and(d)},each:function(d){return this.toCollection().each(d)},toArray:function(d){return this.toCollection().toArray(d)},orderBy:function(d){return new la(new Ha(this,ya(d)?"["+d.join("+")+
"]":d))},toCollection:function(){return new la(new Ha(this))},mapToClass:function(d,f){this.schema.mappedClass=d;var m=Object.create(d.prototype);f&&gc(m,f);this.schema.instanceTemplate=m;m=function(k){if(!k)return k;var n=Object.create(d.prototype),q;for(q in k)if(sa.call(k,q))try{n[q]=k[q]}catch(c){}return n};this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook);this.schema.readHook=m;this.hook("reading",m);return d},defineClass:function(d){return this.mapToClass(ea.defineClass(d),
d)},bulkDelete:function(d){return this.hook.deleting.fire===O?this._idbstore("readwrite",function(f,m,k,n){f(Eb(k,n,d,!1,O))}):this.where(":id").anyOf(d)["delete"]().then(function(){})},bulkPut:function(d,f){var m=this;return this._idbstore("readwrite",function(k,n,q){if(!q.keyPath&&!m.schema.primKey.auto&&!f)throw new E.InvalidArgument("bulkPut() with non-inbound keys requires keys array in second argument");if(q.keyPath&&f)throw new E.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");
if(f&&f.length!==d.length)throw new E.InvalidArgument("Arguments objects and keys must have the same length");if(0===d.length)return k();var c=function(x){0===e.length?k(x):n(new ab(m.name+".bulkPut(): "+e.length+" of "+h+" operations failed",e))},e=[],h=d.length;if(m.hook.creating.fire===O&&m.hook.updating.fire===O){var p=va(e);for(var t=0,y=d.length;t<y;++t){var C=f?q.put(d[t],f[t]):q.put(d[t]);C.onerror=p}C.onerror=va(e,c);C.onsuccess=ob(c)}else{var B=f||q.keyPath&&d.map(function(x){return ua(x,
q.keyPath)}),u=B&&mc(B,function(x,M){return null!=x&&[x,d[M]]});(B?m.where(":id").anyOf(B.filter(function(x){return null!=x})).modify(function(){this.value=u[this.primKey];u[this.primKey]=null})["catch"](rb,function(x){e=x.failures}).then(function(){for(var x=[],M=f&&[],K=B.length-1;0<=K;--K){var I=B[K];if(null==I||u[I])x.push(d[K]),f&&M.push(I),null!=I&&(u[I]=null)}x.reverse();f&&M.reverse();return m.bulkAdd(x,M)}).then(function(x){var M=B[B.length-1];return null!=M?M:x}):m.bulkAdd(d)).then(c)["catch"](ab,
function(x){e=e.concat(x.failures);c()})["catch"](n)}},"locked")},bulkAdd:function(d,f){var m=this,k=this.hook.creating.fire;return this._idbstore("readwrite",function(n,q,c,e){function h(I){0===p.length?n(I):q(new ab(m.name+".bulkAdd(): "+p.length+" of "+t+" operations failed",p))}if(!c.keyPath&&!m.schema.primKey.auto&&!f)throw new E.InvalidArgument("bulkAdd() with non-inbound keys requires keys array in second argument");if(c.keyPath&&f)throw new E.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");
if(f&&f.length!==d.length)throw new E.InvalidArgument("Arguments objects and keys must have the same length");if(0===d.length)return n();var p=[],t=d.length;if(k!==O){var y=c.keyPath,C;var B=va(p,null,!0);var u=Xa(null);$a(function(){for(var I=0,ba=d.length;I<ba;++I){C={onerror:null,onsuccess:null};var z=f&&f[I],L=d[I],S=f?z:y?ua(L,y):void 0,W=k.call(C,S,L,e);null==S&&null!=W&&(y?(L=Ia(L),oa(L,y,W)):z=W);K=null!=z?c.add(L,z):c.add(L);K._hookCtx=C;I<ba-1&&(K.onerror=B,C.onsuccess&&(K.onsuccess=u))}},
function(I){C.onerror&&C.onerror(I);throw I;});K.onerror=va(p,h,!0);K.onsuccess=Xa(h)}else{B=va(p);for(var x=0,M=d.length;x<M;++x){var K=f?c.add(d[x],f[x]):c.add(d[x]);K.onerror=B}K.onerror=va(p,h);K.onsuccess=ob(h)}})},add:function(d,f){var m=this.hook.creating.fire;return this._idbstore("readwrite",function(k,n,q,c){var e={onsuccess:null,onerror:null};if(m!==O){var h=null!=f?f:q.keyPath?ua(d,q.keyPath):void 0;c=m.call(e,h,d,c);null==h&&null!=c&&(q.keyPath?oa(d,q.keyPath,c):f=c)}try{var p=null!=
f?q.add(d,f):q.add(d);p._hookCtx=e;p.onerror=Fb(n);p.onsuccess=Xa(function(t){var y=q.keyPath;y&&oa(d,y,t);k(t)})}catch(t){if(e.onerror)e.onerror(t);throw t;}})},put:function(d,f){var m=this,k=this.hook.updating.fire;if(this.hook.creating.fire!==O||k!==O){k=this.schema.primKey.keyPath;var n=void 0!==f?f:k&&ua(d,k);if(null==n)return this.add(d);d=Ia(d);return this._trans("readwrite",function(){return m.where(":id").equals(n).modify(function(){this.value=d}).then(function(q){return 0===q?m.add(d,f):
n})},"locked")}return this._idbstore("readwrite",function(q,c,e){var h=void 0!==f?e.put(d,f):e.put(d);h.onerror=pa(c);h.onsuccess=U(function(p){var t=e.keyPath;t&&oa(d,t,p.target.result);q(h.result)})})},"delete":function(d){return this.hook.deleting.subscribers.length?this.where(":id").equals(d)["delete"]():this._idbstore("readwrite",function(f,m,k){var n=k["delete"](d);n.onerror=pa(m);n.onsuccess=U(function(){f(n.result)})})},clear:function(){return this.hook.deleting.subscribers.length?this.toCollection()["delete"]():
this._idbstore("readwrite",function(d,f,m){var k=m.clear();k.onerror=pa(f);k.onsuccess=U(function(){d(k.result)})})},update:function(d,f){if("object"!==typeof f||ya(f))throw new E.InvalidArgument("Modifications must be an object.");if("object"!==typeof d||ya(d))return this.where(":id").equals(d).modify(f);Y(f).forEach(function(k){oa(d,k,f[k])});var m=ua(d,this.schema.primKey.keyPath);return void 0===m?ia(new E.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(m).modify(f)}});
D(Oa.prototype,{_lock:function(){Da(!F.global);++this._reculock;1!==this._reculock||F.global||(F.lockOwnerFor=this);return this},_unlock:function(){Da(!F.global);if(0===--this._reculock)for(F.global||(F.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var d=this._blockedFuncs.shift();try{fb(d[1],d[0])}catch(f){}}return this},_locked:function(){return this._reculock&&F.lockOwnerFor!==this},create:function(d){var f=this;if(!this.mode)return this;Da(!this.idbtrans);if(!d&&!fa)switch(ha&&
ha.name){case "DatabaseClosedError":throw new E.DatabaseClosed(ha);case "MissingAPIError":throw new E.MissingAPI(ha.message,ha);default:throw new E.OpenFailed(ha);}if(!this.active)throw new E.TransactionInactive;Da(null===this._completion._state);d=this.idbtrans=d||fa.transaction(ac(this.storeNames),this.mode);d.onerror=U(function(m){lb(m);f._reject(d.error)});d.onabort=U(function(m){lb(m);f.active&&f._reject(new E.Abort(d.error));f.active=!1;f.on("abort").fire(m)});d.oncomplete=U(function(){f.active=
!1;f._resolve()});return this},_promise:function(d,f,m){var k=this;if("readwrite"===d&&"readwrite"!==this.mode)return ia(new E.ReadOnly("Transaction is readonly"));if(!this.active)return ia(new E.TransactionInactive);if(this._locked())return new A(function(q,c){k._blockedFuncs.push([function(){k._promise(d,f,m).then(q,c)},F])});if(m)return Na(function(){var q=new A(function(c,e){k._lock();var h=f(c,e,k);h&&h.then&&h.then(c,e)});q["finally"](function(){return k._unlock()});q._lib=!0;return q});var n=
new A(function(q,c){var e=f(q,c,k);e&&e.then&&e.then(q,c)});n._lib=!0;return n},_root:function(){return this.parent?this.parent._root():this},waitFor:function(d){var f=this._root();d=A.resolve(d);if(f._waitingFor)f._waitingFor=f._waitingFor.then(function(){return d});else{f._waitingFor=d;f._waitingQueue=[];var m=f.idbtrans.objectStore(f.storeNames[0]);(function q(){for(++f._spinCount;f._waitingQueue.length;)f._waitingQueue.shift()();f._waitingFor&&(m.get(-Infinity).onsuccess=q)})()}var k=f._waitingFor;
return new A(function(n,q){d.then(function(c){return f._waitingQueue.push(U(n.bind(null,c)))},function(c){return f._waitingQueue.push(U(q.bind(null,c)))})["finally"](function(){f._waitingFor===k&&(f._waitingFor=null)})})},abort:function(){this.active&&this._reject(new E.Abort);this.active=!1},tables:{get:Uc("Transaction.tables",function(){return wa})},table:function(d){var f=G.table(d);return new da(d,f.schema,this)}});D(Ha.prototype,function(){function d(c,e,h){c=c instanceof Ha?new la(c):c;c._ctx.error=
h?new h(e):new TypeError(e);return c}function f(c){return(new la(c,function(){return za.only("")})).limit(0)}function m(c){return"next"===c?function(e){return e.toUpperCase()}:function(e){return e.toLowerCase()}}function k(c){return"next"===c?function(e){return e.toLowerCase()}:function(e){return e.toUpperCase()}}function n(c,e,h,p,t,y){for(var C=Math.min(c.length,p.length),B=-1,u=0;u<C;++u){var x=e[u];if(x!==p[u])return 0>t(c[u],h[u])?c.substr(0,u)+h[u]+h.substr(u+1):0>t(c[u],p[u])?c.substr(0,u)+
p[u]+h.substr(u+1):0<=B?c.substr(0,B)+e[B]+h.substr(B+1):null;0>t(c[u],x)&&(B=u)}return C<p.length&&"next"===y?c+h.substr(c.length):C<c.length&&"prev"===y?c.substr(0,h.length):0>B?null:c.substr(0,B)+p[B]+h.substr(B+1)}function q(c,e,h,p){function t(z){y=m(z);C=k(z);B="next"===z?md:nd;var L=h.map(function(S){return{lower:C(S),upper:y(S)}}).sort(function(S,W){return B(S.lower,W.lower)});u=L.map(function(S){return S.upper});x=L.map(function(S){return S.lower});M=z;K="next"===z?"":p}var y,C,B,u,x,M,K,
I=h.length;if(!h.every(function(z){return"string"===typeof z}))return d(c,"String expected.");t("next");c=new la(c,function(){return za.bound(u[0],x[I-1]+p)});c._ondirectionchange=function(z){t(z)};var ba=0;c._addAlgorithm(function(z,L,S){var W=z.key;if("string"!==typeof W)return!1;var X=C(W);if(e(X,x,ba))return!0;for(var qa=null,na=ba;na<I;++na){var T=n(W,X,u[na],x[na],B,M);if(null===T&&null===qa)ba=na+1;else if(null===qa||0<B(qa,T))qa=T}null!==qa?L(function(){z["continue"](qa+K)}):L(S);return!1});
return c}return{between:function(c,e,h,p){h=!1!==h;p=!0===p;try{return 0<ma.cmp(c,e)||!(0!==ma.cmp(c,e)||!h&&!p||h&&p)?f(this):new la(this,function(){return za.bound(c,e,!h,!p)})}catch(t){return d(this,"Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.")}},equals:function(c){return new la(this,function(){return za.only(c)})},above:function(c){return new la(this,function(){return za.lowerBound(c,!0)})},aboveOrEqual:function(c){return new la(this,function(){return za.lowerBound(c)})},
below:function(c){return new la(this,function(){return za.upperBound(c,!0)})},belowOrEqual:function(c){return new la(this,function(){return za.upperBound(c)})},startsWith:function(c){return"string"!==typeof c?d(this,"String expected."):this.between(c,c+Za,!0,!0)},startsWithIgnoreCase:function(c){return""===c?this.startsWith(c):q(this,function(e,h){return 0===e.indexOf(h[0])},[c],Za)},equalsIgnoreCase:function(c){return q(this,function(e,h){return e===h[0]},[c],"")},anyOfIgnoreCase:function(){var c=
Ja.apply(Sa,arguments);return 0===c.length?f(this):q(this,function(e,h){return-1!==h.indexOf(e)},c,"")},startsWithAnyOfIgnoreCase:function(){var c=Ja.apply(Sa,arguments);return 0===c.length?f(this):q(this,function(e,h){return h.some(function(p){return 0===e.indexOf(p)})},c,Za)},anyOf:function(){var c=Ja.apply(Sa,arguments),e=xa;try{c.sort(e)}catch(t){return d(this,"Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.")}if(0===c.length)return f(this);var h=
new la(this,function(){return za.bound(c[0],c[c.length-1])});h._ondirectionchange=function(t){e="next"===t?xa:Gb;c.sort(e)};var p=0;h._addAlgorithm(function(t,y,C){for(var B=t.key;0<e(B,c[p]);)if(++p,p===c.length)return y(C),!1;if(0===e(B,c[p]))return!0;y(function(){t["continue"](c[p])});return!1});return h},notEqual:function(c){return this.inAnyRange([[-Infinity,c],[c,nb]],{includeLowers:!1,includeUppers:!1})},noneOf:function(){var c=Ja.apply(Sa,arguments);if(0===c.length)return new la(this);try{c.sort(xa)}catch(h){return d(this,
"Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.")}var e=c.reduce(function(h,p){return h?h.concat([[h[h.length-1][1],p]]):[[-Infinity,p]]},null);e.push([c[c.length-1],nb]);return this.inAnyRange(e,{includeLowers:!1,includeUppers:!1})},inAnyRange:function(c,e){function h(z,L){for(var S=0,W=z.length;S<W;++S){var X=z[S];if(0>ma.cmp(L[0],X[1])&&0<ma.cmp(L[1],X[0])){var qa=X;var na=X[0];var T=L[0];na=0>ma.cmp(na,T)?na:T;qa[0]=na;qa=X;X=X[1];na=L[1];X=0<
ma.cmp(X,na)?X:na;qa[1]=X;break}}S===W&&z.push(L);return z}function p(z,L){return B(z[0],L[0])}function t(z){return!M(z)&&!K(z)}if(0===c.length)return f(this);if(!c.every(function(z){return void 0!==z[0]&&void 0!==z[1]&&0>=xa(z[0],z[1])}))return d(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",E.InvalidArgument);var y=!e||!1!==e.includeLowers,C=e&&!0===e.includeUppers,B=xa;try{var u=c.reduce(h,[]);u.sort(p)}catch(z){return d(this,
"Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.")}var x=0,M=C?function(z){return 0<xa(z,u[x][1])}:function(z){return 0<=xa(z,u[x][1])},K=y?function(z){return 0<Gb(z,u[x][0])}:function(z){return 0<=Gb(z,u[x][0])},I=M,ba=new la(this,function(){return za.bound(u[0][0],u[u.length-1][1],!y,!C)});ba._ondirectionchange=function(z){"next"===z?(I=M,B=xa):(I=K,B=Gb);u.sort(p)};ba._addAlgorithm(function(z,L,S){for(var W=z.key;I(W);)if(++x,x===u.length)return L(S),
!1;if(t(W))return!0;0!==ma.cmp(W,u[x][1])&&0!==ma.cmp(W,u[x][0])&&L(function(){B===xa?z["continue"](u[x][0]):z["continue"](u[x][1])});return!1});return ba},startsWithAnyOf:function(){var c=Ja.apply(Sa,arguments);return c.every(function(e){return"string"===typeof e})?0===c.length?f(this):this.inAnyRange(c.map(function(e){return[e,e+Za]})):d(this,"startsWithAnyOf() only works with strings")}}});D(la.prototype,function(){function d(c,e){c.filter=Pa(c.filter,e)}function f(c,e,h){var p=c.replayFilter;
c.replayFilter=p?function(){return Pa(p(),e())}:e;c.justLimit=h&&!p}function m(c,e){c.isMatch=Pa(c.isMatch,e)}function k(c,e){if(c.isPrimKey)return e;var h=c.table.schema.idxByName[c.index];if(!h)throw new E.Schema("KeyPath "+c.index+" on object store "+e.name+" is not indexed");return e.index(h.name)}function n(c,e){var h=k(c,e);return c.keysOnly&&"openKeyCursor"in h?h.openKeyCursor(c.range||null,c.dir+c.unique):h.openCursor(c.range||null,c.dir+c.unique)}function q(c,e,h,p,t){var y=c.replayFilter?
Pa(c.filter,c.replayFilter()):c.filter;c.or?function(){function C(){2===++x&&h()}function B(M,K,I){if(!y||y(K,I,C,p)){var ba=K.primaryKey,z=""+ba;"[object ArrayBuffer]"===z&&(z=""+new Uint8Array(ba));sa.call(u,z)||(u[z]=!0,e(M,K,I))}}var u={},x=0;c.or._iterate(B,C,p,t);Ec(n(c,t),c.algorithm,B,C,p,!c.keysOnly&&c.valueMapper)}():Ec(n(c,t),Pa(c.algorithm,y),e,h,p,!c.keysOnly&&c.valueMapper)}return{_read:function(c,e){var h=this._ctx;return h.error?h.table._trans(null,ia.bind(null,h.error)):h.table._idbstore("readonly",
c).then(e)},_write:function(c){var e=this._ctx;return e.error?e.table._trans(null,ia.bind(null,e.error)):e.table._idbstore("readwrite",c,"locked")},_addAlgorithm:function(c){var e=this._ctx;e.algorithm=Pa(e.algorithm,c)},_iterate:function(c,e,h,p){return q(this._ctx,c,e,h,p)},clone:function(c){var e=Object.create(this.constructor.prototype),h=Object.create(this._ctx);c&&w(h,c);e._ctx=h;return e},raw:function(){this._ctx.valueMapper=null;return this},each:function(c){var e=this._ctx;return this._read(function(h,
p,t){q(e,c,h,p,t)})},count:function(c){var e=this._ctx;if(ib(e,!0))return this._read(function(p,t,y){y=k(e,y);y=e.range?y.count(e.range):y.count();y.onerror=pa(t);y.onsuccess=function(C){p(Math.min(C.target.result,e.limit))}},c);var h=0;return this._read(function(p,t,y){q(e,function(){++h;return!1},function(){p(h)},t,y)},c)},sortBy:function(c,e){function h(u,x){return x?h(u[t[x]],x-1):u[y]}function p(u,x){var M=h(u,C),K=h(x,C);return M<K?-B:M>K?B:0}var t=c.split(".").reverse(),y=t[0],C=t.length-1,
B="next"===this._ctx.dir?1:-1;return this.toArray(function(u){return u.sort(p)}).then(e)},toArray:function(c){var e=this._ctx;return this._read(function(h,p,t){if(Hb&&"next"===e.dir&&ib(e,!0)&&0<e.limit){var y=e.table.hook.reading.fire;t=k(e,t);t=Infinity>e.limit?t.getAll(e.range,e.limit):t.getAll(e.range);t.onerror=pa(p);t.onsuccess=y===bb?ob(h):ob(function(B){try{h(B.map(y))}catch(u){p(u)}})}else{var C=[];q(e,function(B){C.push(B)},function(){h(C)},p,t)}},c)},offset:function(c){var e=this._ctx;
if(0>=c)return this;e.offset+=c;ib(e)?f(e,function(){var h=c;return function(p,t){if(0===h)return!0;if(1===h)return--h,!1;t(function(){p.advance(h);h=0});return!1}}):f(e,function(){var h=c;return function(){return 0>--h}});return this},limit:function(c){this._ctx.limit=Math.min(this._ctx.limit,c);f(this._ctx,function(){var e=c;return function(h,p,t){0>=--e&&p(t);return 0<=e}},!0);return this},until:function(c,e){d(this._ctx,function(h,p,t){return c(h.value)?(p(t),e):!0});return this},first:function(c){return this.limit(1).toArray(function(e){return e[0]}).then(c)},
last:function(c){return this.reverse().first(c)},filter:function(c){d(this._ctx,function(e){return c(e.value)});m(this._ctx,c);return this},and:function(c){return this.filter(c)},or:function(c){return new Ha(this._ctx.table,c,this)},reverse:function(){this._ctx.dir="prev"===this._ctx.dir?"next":"prev";this._ondirectionchange&&this._ondirectionchange(this._ctx.dir);return this},desc:function(){return this.reverse()},eachKey:function(c){var e=this._ctx;e.keysOnly=!e.isMatch;return this.each(function(h,
p){c(p.key,p)})},eachUniqueKey:function(c){this._ctx.unique="unique";return this.eachKey(c)},eachPrimaryKey:function(c){var e=this._ctx;e.keysOnly=!e.isMatch;return this.each(function(h,p){c(p.primaryKey,p)})},keys:function(c){var e=this._ctx;e.keysOnly=!e.isMatch;var h=[];return this.each(function(p,t){h.push(t.key)}).then(function(){return h}).then(c)},primaryKeys:function(c){var e=this._ctx;if(Hb&&"next"===e.dir&&ib(e,!0)&&0<e.limit)return this._read(function(p,t,y){y=k(e,y);y=Infinity>e.limit?
y.getAllKeys(e.range,e.limit):y.getAllKeys(e.range);y.onerror=pa(t);y.onsuccess=ob(p)}).then(c);e.keysOnly=!e.isMatch;var h=[];return this.each(function(p,t){h.push(t.primaryKey)}).then(function(){return h}).then(c)},uniqueKeys:function(c){this._ctx.unique="unique";return this.keys(c)},firstKey:function(c){return this.limit(1).keys(function(e){return e[0]}).then(c)},lastKey:function(c){return this.reverse().firstKey(c)},distinct:function(){var c=this._ctx;c=c.index&&c.table.schema.idxByName[c.index];
if(!c||!c.multi)return this;var e={};d(this._ctx,function(h){h=h.primaryKey.toString();var p=sa.call(e,h);e[h]=!0;return!p});return this},modify:function(c){var e=this,h=this._ctx.table.hook,p=h.updating.fire,t=h.deleting.fire;return this._write(function(y,C,B,u){function x(T){T&&(X.push(T),qa.push(na));return C(new rb("Error modifying one or more objects",X,S,qa))}function M(){W&&S+X.length===L&&(0<X.length?x():y(S))}if("function"===typeof c)var K=p===O&&t===O?c:function(T){var ra=Ia(T);if(!1===
c.call(this,T,this))return!1;if(sa.call(this,"value")){var ta=Lb(ra,this.value),V=p.call(this,ta,this.primKey,ra,u);V&&(T=this.value,Y(V).forEach(function(Aa){oa(T,Aa,V[Aa])}))}else t.call(this,this.primKey,T,u)};else if(p===O){var I=Y(c),ba=I.length;K=function(T){for(var ra=!1,ta=0;ta<ba;++ta){var V=I[ta],Aa=c[V];ua(T,V)!==Aa&&(oa(T,V,Aa),ra=!0)}return ra}}else{var z=c;c=Kb(z);K=function(T){var ra=!1,ta=p.call(this,c,this.primKey,Ia(T),u);ta&&w(c,ta);Y(c).forEach(function(V){var Aa=c[V];ua(T,V)!==
Aa&&(oa(T,V,Aa),ra=!0)});ta&&(c=Kb(z));return ra}}var L=0,S=0,W=!1,X=[],qa=[],na=null;e.clone().raw()._iterate(function(T,ra){function ta(pb){X.push(pb);qa.push(V.primKey);M();return!0}na=ra.primaryKey;var V={primKey:ra.primaryKey,value:T,onsuccess:null,onerror:null};if(!1!==K.call(V,T,V)){var Aa=!sa.call(V,"value");++L;$a(function(){var pb=Aa?ra["delete"]():ra.update(V.value);pb._hookCtx=V;pb.onerror=Fb(ta);pb.onsuccess=Xa(function(){++S;M()})},ta)}else if(V.onsuccess)V.onsuccess(V.value)},function(){W=
!0;M()},x,B)})},"delete":function(){var c=this,e=this._ctx,h=e.range,p=e.table.hook.deleting.fire,t=p!==O;if(!t&&ib(e)&&(e.isPrimKey&&!rd||!h))return this._write(function(C,B,u){var x=pa(B),M=h?u.count(h):u.count();M.onerror=x;M.onsuccess=function(){var K=M.result;$a(function(){var I=h?u["delete"](h):u.clear();I.onerror=x;I.onsuccess=function(){return C(K)}},function(I){return B(I)})}});var y=t?2E3:1E4;return this._write(function(C,B,u,x){var M=0,K=c.clone({keysOnly:!e.isMatch&&!t}).distinct().limit(y).raw(),
I=[],ba=function(){return K.each(t?function(z,L){I.push([L.primaryKey,L.value])}:function(z,L){I.push(L.primaryKey)}).then(function(){t?I.sort(function(z,L){return xa(z[0],L[0])}):I.sort(xa);return Eb(u,x,I,t,p)}).then(function(){var z=I.length;M+=z;I=[];return z<y?M:ba()})};C(ba())})}}});w(this,{Collection:la,Table:da,Transaction:Oa,Version:g,WhereClause:Ha});(function(){G.on("versionchange",function(d){0<d.newVersion?console.warn("Another connection wants to upgrade database '"+G.name+"'. Closing db now to resume the upgrade."):
console.warn("Another connection wants to delete database '"+G.name+"'. Closing db now to resume the delete request.");G.close()});G.on("blocked",function(d){!d.newVersion||d.newVersion<d.oldVersion?console.warn("Dexie.delete('"+G.name+"') was blocked"):console.warn("Upgrade '"+G.name+"' blocked by other connection holding version "+d.oldVersion/10)})})();pd.forEach(function(d){d(G)})}function Ic(a){if("function"===typeof a)return new a;if(ya(a))return[Ic(a[0])];if(a&&"object"===typeof a){var b={};
gc(b,a);return b}return a}function gc(a,b){Y(b).forEach(function(g){var l=Ic(b[g]);a[g]=l});return a}function Xa(a){return U(function(b){var g=b.target;b=g._hookCtx;g=b.value||g.result;(b=b&&b.onsuccess)&&b(g);a&&a(g)},a)}function pa(a){return U(function(b){lb(b);a(b.target.error);return!1})}function ob(a){return U(function(b){a(b.target.result)})}function Fb(a){return U(function(b){var g=b.target,l=g.error;(g=(g=g._hookCtx)&&g.onerror)&&g(l);lb(b);a(l);return!1})}function lb(a){a.stopPropagation&&
a.stopPropagation();a.preventDefault&&a.preventDefault()}function fc(a){function b(v){return function(H){H=v(H);var P=H.value;return H.done?P:P&&"function"===typeof P.then?P.then(l,r):ya(P)?A.all(P).then(l,r):l(P)}}var g=function(v){return a.next(v)},l=b(g),r=b(function(v){return a["throw"](v)});return b(g)()}function Ya(a,b,g,l,r,v,H){this.name=a;this.keyPath=b;this.unique=g;this.multi=l;this.auto=r;this.compound=v;this.dotted=H;a="string"===typeof b?b:b&&"["+[].join.call(b,"+")+"]";this.src=(g?
"&":"")+(l?"*":"")+(r?"++":"")+a}function bc(a,b,g,l){this.name=a;this.primKey=b||new Ya;this.indexes=g||[new Ya];this.instanceTemplate=l;this.mappedClass=null;this.idxByName=mc(g,function(r){return[r.name,r]})}function ac(a){return 1===a.length?a[0]:a}function Gc(a){var b=a&&(a.getDatabaseNames||a.webkitGetDatabaseNames);return b&&b.bind(a)}var Y=Object.keys,ya=Array.isArray,R="undefined"!==typeof self?self:"undefined"!==typeof window?window:global,kc=Object.getPrototypeOf,sa={}.hasOwnProperty,Pc=
Object.defineProperty,Qc=Object.getOwnPropertyDescriptor,$b=[].slice,Cc=[].concat,Rc="Boolean String Date RegExp Blob File FileList ArrayBuffer DataView Uint8ClampedArray ImageData Map Set".split(" ").concat(Cc.apply([],[8,16,32,64].map(function(a){return["Int","Uint","Float"].map(function(b){return b+a+"Array"})}))).filter(function(a){return R[a]}).map(function(a){return R[a]}),Jc="undefined"!==typeof Symbol&&Symbol.iterator,Sc=Jc?function(a){var b;return null!=a&&(b=a[Jc])&&b.apply(a)}:function(){return null},
Sa={},Ea="undefined"!==typeof location&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href),pc=function(){return!0},Tc=!Error("").stack,Kc="Unknown Constraint Data TransactionInactive ReadOnly Version NotFound InvalidState InvalidAccess Abort Timeout QuotaExceeded Syntax DataClone".split(" "),hc="Modify Bulk OpenFailed VersionChange Schema Upgrade InvalidTable MissingAPI NoSuchDatabase InvalidArgument SubTransaction Unsupported Internal DatabaseClosed PrematureCommit ForeignAwait".split(" ").concat(Kc),
sd={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed"};N(Ta).from(Error).extend({stack:{get:function(){return this._stack||(this._stack=this.name+": "+this.message+qb(this._e,2))}},toString:function(){return this.name+": "+this.message}});N(rb).from(Ta);N(ab).from(Ta);var td=hc.reduce(function(a,b){return a[b]=b+"Error",a},{}),E=hc.reduce(function(a,
b){function g(r,v){this._e=Fa();this.name=l;r?"string"===typeof r?(this.message=r,this.inner=v||null):"object"===typeof r&&(this.message=r.name+" "+r.message,this.inner=r):(this.message=sd[b]||l,this.inner=null)}var l=b+"Error";N(g).from(Ta);a[b]=g;return a},{});E.Syntax=SyntaxError;E.Type=TypeError;E.Range=RangeError;var Lc=Kc.reduce(function(a,b){a[b+"Error"]=E[b];return a},{}),Ib=hc.reduce(function(a,b){-1===["Syntax","Type","Range"].indexOf(b)&&(a[b+"Error"]=E[b]);return a},{});Ib.ModifyError=
rb;Ib.DexieError=Ta;Ib.BulkError=ab;var cb={},Jb=function(){try{return(new Function("let F=async ()=>{},p=F();return [p,Object.getPrototypeOf(p),Promise.resolve(),F.constructor];"))()}catch(b){var a=R.Promise;return a?[a.resolve(),a.prototype,a.resolve()]:[]}}(),Xb=Jb[0],Bb=Jb[1],ic=Jb[2],hd=Bb&&Bb.then,yc=Xb&&Xb.constructor,qd=Jb[3],Tb=!!ic,Ob=!1,ud=ic?function(){ic.then(vb)}:R.setImmediate?setImmediate.bind(null,vb):R.MutationObserver?function(){var a=document.createElement("div");(new MutationObserver(function(){vb();
a=null})).observe(a,{attributes:!0});a.setAttribute("i","1")}:function(){setTimeout(vb,0)},db=function(a,b){eb.push([a,b]);wb&&(ud(),wb=!1)},Sb=!0,wb=!0,Ma=[],ub=[],Rb=null,Nb=bb,Ua={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:Ac,pgp:!1,env:{},finalize:function(){this.unhandleds.forEach(function(a){try{Ac(a[0],a[1])}catch(b){}})}},F=Ua,eb=[],La=0,xb=[],jc={get:function(){function a(l,r){var v=this,H=!b.global&&(b!==F||g!==Vb);H&&zb();var P=new A(function(aa,ca){Pb(v,new sc(Cb(l,b,H),Cb(r,
b,H),aa,ca,b))});Ea&&vc(P,this);return P}var b=F,g=Vb;a.prototype=cb;return a},set:function(a){J(this,"then",a&&a.prototype===cb?jc:{get:function(){return a},set:jc.set})}};D(A.prototype,{then:jc,_then:function(a,b){Pb(this,new sc(null,null,a,b,F))},"catch":function(a){if(1===arguments.length)return this.then(null,a);var b=arguments[0],g=arguments[1];return"function"===typeof b?this.then(null,function(l){return l instanceof b?g(l):yb(l)}):this.then(null,function(l){return l&&l.name===b?g(l):yb(l)})},
"finally":function(a){return this.then(function(b){a();return b},function(b){a();return yb(b)})},stack:{get:function(){if(this._stack)return this._stack;try{Ob=!0;var a=uc(this,[],20).join("\nFrom previous: ");null!==this._state&&(this._stack=a);return a}finally{Ob=!1}}},timeout:function(a,b){var g=this;return Infinity>a?new A(function(l,r){var v=setTimeout(function(){return r(new E.Timeout(b))},a);g.then(l,r)["finally"](clearTimeout.bind(null,v))}):this}});"undefined"!==typeof Symbol&&Symbol.toStringTag&&
J(A.prototype,Symbol.toStringTag,"Promise");Ua.env=zc();D(A,{all:function(){var a=Ja.apply(null,arguments).map(xc);return new A(function(b,g){0===a.length&&b([]);var l=a.length;a.forEach(function(r,v){return A.resolve(r).then(function(H){a[v]=H;--l||b(a)},g)})})},resolve:function(a){if(a instanceof A)return a;if(a&&"function"===typeof a.then)return new A(function(g,l){a.then(g,l)});var b=new A(cb,!0,a);vc(b,Rb);return b},reject:yb,race:function(){var a=Ja.apply(null,arguments).map(xc);return new A(function(b,
g){a.map(function(l){return A.resolve(l).then(b,g)})})},PSD:{get:function(){return F},set:function(a){return F=a}},newPSD:Na,usePSD:fb,scheduler:{get:function(){return db},set:function(a){db=a}},rejectionMapper:{get:function(){return Nb},set:function(a){Nb=a}},follow:function(a,b){return new A(function(g,l){return Na(function(r,v){var H=F;H.unhandleds=[];H.onunhandled=v;H.finalize=Ka(function(){var P=this;cd(function(){0===P.unhandleds.length?r():v(P.unhandleds[0])})},H.finalize);a()},b,g,l)})}});
var Z={awaits:0,echoes:0,id:0},ed=0,Ab=[],Wb=0,Vb=0,dd=0,Bc="unhandledrejection",ia=A.reject,Za=String.fromCharCode(65535);try{IDBKeyRange.only([[]]);var nb=[[]]}catch(a){nb=Za}var jb=[],Mc="undefined"!==typeof navigator&&/(MSIE|Trident|Edge)/.test(navigator.userAgent),id=Mc,rd=Mc,Nc=function(a){return!/(dexie\.js|dexie\.min\.js)/.test(a)};oc(Ea,Nc);D(ea,Ib);var vd=E.Modify;try{var Oc={indexedDB:R.indexedDB||R.mozIndexedDB||R.webkitIndexedDB||R.msIndexedDB,IDBKeyRange:R.IDBKeyRange||R.webkitIDBKeyRange}}catch(a){Oc=
{indexedDB:null,IDBKeyRange:null}}D(ea,{"delete":function(a){var b=new ea(a);a=b["delete"]();a.onblocked=function(g){b.on("blocked",g);return this};return a},exists:function(a){return(new ea(a)).open().then(function(b){b.close();return!0})["catch"](ea.NoSuchDatabaseError,function(){return!1})},getDatabaseNames:function(a){var b=Gc(ea.dependencies.indexedDB);return b?(new A(function(g,l){var r=b();r.onsuccess=function(v){g($b.call(v.target.result,0,void 0))};r.onerror=pa(l)})).then(a):mb.dbnames.toCollection().primaryKeys(a)},
defineClass:function(){return function(a){a&&w(this,a)}},applyStructure:gc,ignoreTransaction:function(a){return F.trans?fb(F.transless,a):a()},vip:function(a){return Na(function(){F.letThrough=!0;return a()})},async:function(a){return function(){try{var b=fc(a.apply(this,arguments));return b&&"function"===typeof b.then?b:A.resolve(b)}catch(g){return ia(g)}}},spawn:function(a,b,g){try{var l=fc(a.apply(g,b||[]));return l&&"function"===typeof l.then?l:A.resolve(l)}catch(r){return ia(r)}},currentTransaction:{get:function(){return F.trans||
null}},waitFor:function(a,b){var g=A.resolve("function"===typeof a?ea.ignoreTransaction(a):a).timeout(b||6E4);return F.trans?F.trans.waitFor(g):g},Promise:A,debug:{get:function(){return Ea},set:function(a){oc(a,"dexie"===a?function(){return!0}:Nc)}},derive:N,extend:w,props:D,override:Ca,Events:Db,getByKeyPath:ua,setByKeyPath:oa,delByKeyPath:function(a,b){"string"===typeof b?oa(a,b,void 0):"length"in b&&[].map.call(b,function(g){oa(a,g,void 0)})},shallowClone:Kb,deepClone:Ia,getObjectDiff:Lb,asap:lc,
maxKey:nb,minKey:-Infinity,addons:[],connections:jb,MultiModifyError:vd,errnames:td,IndexSpec:Ya,TableSchema:bc,dependencies:Oc,semVer:"2.0.4",version:["2","0","4"].map(function(a){return parseInt(a)}).reduce(function(a,b,g){return a+b/Math.pow(10,2*g)}),"default":ea,Dexie:ea});A.rejectionMapper=function(a,b){if(!a||a instanceof Ta||a instanceof TypeError||a instanceof SyntaxError||!a.name||!Lc[a.name])return a;var g=new Lc[a.name](b||a.message,a);"stack"in a&&J(g,"stack",{get:function(){return this.inner.stack}});
return g};var mb=new ea("__dbnames");mb.version(1).stores({dbnames:"name"});(function(){try{void 0!==R.document&&(JSON.parse(localStorage.getItem("Dexie.DatabaseNames")||"[]").forEach(function(a){return mb.dbnames.put({name:a})["catch"](O)}),localStorage.removeItem("Dexie.DatabaseNames"))}catch(a){}})();return ea});